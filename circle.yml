machine:
  xcode:
    version: 9.2
  environment:
    LANG: en_US.UTF-8

dependencies:
  override:
    - brew update; brew update # Due to a problem with Homebrew, see: https://github.com/Homebrew/brew/issues/991
    - brew install swiftlint
    - pod install --project-directory=Example/ --silent
  cache_directories:
    - "Example/Pods"

test:
  pre:
    - set -o pipefail
    - swiftlint
  override:
    - xcodebuild test -scheme Example -workspace Example/Example.xcworkspace -sdk iphonesimulator -destination "name=iPhone 8" | xcpretty -c
